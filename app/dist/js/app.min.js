!function(e,n){"use strict";var t=e.module("ThePunisher",["ngRoute"]);t.config(["$routeProvider",function(e){e.when("/",{controller:"RouletteCtrl",templateUrl:"templates/roulette-ctrl.html"}).when("/admin",{controller:"AdminCtrl",templateUrl:"templates/admin-ctrl.html"}).otherwise({redirectTo:"/"})}]),n.punisher=t}(angular,window),function(e){"use strict";e.config={backend:"http://localhost:8080/the-punisher"}}(window),function(e){"use strict";e.controller("AdminCtrl",["$scope","punishmentService",function(e,n){e.punishments=[],e.loading=!0,e.$on("punishment-added",function(n,t){e.punishments.push(t)}),e.init=function(){n.list().then(function(n){for(var t=0,i=n.length;i>t;t++)e.punishments.push(n[t]);e.loading=!1})}}])}(window.punisher),function(e){"use strict";e.controller("NewPunishmentCtrl",["$rootScope","$scope","$http","punishmentService",function(e,n,t,i){n.name="",n.description="",n.error=!1,n.success=!1,n.lastPunishment={},n.isValid=function(){return n.name&&n.name.length>0&&n.description&&n.description.length>0},n.doAction=function(){i.create(n.name,n.description).then(function(t){n.error=!1,n.success=!0,n.name="",n.description="",n.lastPunishment=t,e.$broadcast("punishment-added",t)},function(){n.error=!0,n.success=!1})}}])}(window.punisher),function(e){"use strict";var n=["deep-purple","purple","deep-indigo","indigo","blue","light-blue","cyan","teal","deep-teal","deep-green","green","deep-light-green","light-green","deep-lime","lime","yellow","amber","orange","deep-orange"],t=function(e){for(var t=[],i=0,o=!1;t.length<e;)t.push(n[i]),o?i--:i++,i>=n.length?(i-=2,o=!0):0>i&&(i+=2,o=!1);return t};e.controller("RouletteCtrl",["$scope","punishmentService","$timeout",function(e,n,i){e.punishments=[],e.loading=!0,e.showButton=!1,e.selected=void 0,e.colors=[],e.init=function(){n.list().then(function(n){for(var i=0,o=n.length;o>i;i++)e.punishments.push(n[i]);e.colors=t(e.punishments.length),e.loading=!1,e.showButton=!0})},e.spin=function(){var n=0,t=0;e.showButton=!1;var o=function(){var n;do n=Math.floor(Math.random()*e.punishments.length);while(n===t);return t=n,n},r=function s(){for(var t=o(),r=document.getElementsByClassName("roulette-punishment"),c=0,u=r.length;u>c;c++)r[c].classList.add("translucid");r[t].classList.remove("translucid"),window.scrollTo(0,r[t].offsetTop-50),10>n?(i(s,300),n++):(e.selected=e.punishments[t],e.done=!0)};r()}}])}(window.punisher),function(e){"use strict";var n=function(e){function n(){setTimeout(function(){0!=window.scrollY&&(requestAnimationFrame(n),s+=1,t=r-r*Math.cos(s*o),window.scrollTo(0,i-t))},15)}var t,i=window.scrollY,o=Math.PI/(e/15),r=i/2,s=0;requestAnimationFrame(n)};e.directive("appHeader",function(){return{restrict:"E",templateUrl:"/templates/header-directive.html",controller:["$scope","$location",function(e,n){e.showAdminBtn=!0,e.showBackBtn=!1,e.goToAdmin=function(){n.path("/admin"),e.showAdminBtn=!1,e.showBackBtn=!0},e.goBack=function(){n.path("/"),e.showAdminBtn=!0,e.showBackBtn=!1},"/admin"===n.path()&&e.goToAdmin()}],link:function(e,t){t.find("h1")[0].addEventListener("click",function(){n(200)})}}})}(window.punisher),function(e){"use strict";e.directive("punishment",function(){return{restrict:"E",templateUrl:"/templates/punishment-directive.html",scope:{model:"="},replace:!0,controller:["$scope","punishmentService","$timeout",function(e,n,t){e.editing=!1,e.showUndo=!1,e.delete=!1,e.visible=!0,e.edit=function(){e.editable&&(e.editing=!0,e.data=angular.copy(e.model))},e.cancel=function(){e.editing=!1},e.isValid=function(){return e.data.title.trim().length>0&&e.data.description.trim().length>0},e.saveChanges=function(){if(e.error=!1,e.editable){var t=angular.copy(e.data);n.update(e.model.id,t.title,t.description).then(function(){e.model.title=t.title,e.model.description=t.description,e.editing=!1},function(){e.error=!0})}},e.remove=function(){e.editable&&(e.showUndo=!0,e.delete=!0,t(function(){e.delete?n.remove(e.model.id).then(function(){e.visible=!1},function(){e.showUndo=!1,e.delete=!1}):e.showUndo=!1},6e3))},e.undo=function(){e.delete=!1,e.showUndo=!1,t.flush()}}],link:function(e,n,t){e.editable="true"===t.editable}}})}(window.punisher),function(e,n){"use strict";e.service("punishmentService",["$q","$http",function(e,t){var i={};return i.create=function(i,o){var r=e.defer();return t.post(n.backend+"/punishment/create",{title:i,description:o}).then(function(e){r.resolve(e.data)},function(){r.reject(!1)}),r.promise},i.update=function(i,o,r){var s=e.defer();return t.put(n.backend+"/punishment/"+Number(i),{title:o,description:r}).then(function(e){s.resolve(e.data)},function(){s.reject(!1)}),s.promise},i.remove=function(i){var o=e.defer();return t.delete(n.backend+"/punishment/"+Number(i)).then(function(){o.resolve(!0)},function(){o.reject(!1)}),o.promise},i.list=function(){var i=e.defer();return t.get(n.backend+"/punishment/list").then(function(e){e.data&&e.data.punishments?i.resolve(e.data.punishments):i.reject(!1)},function(){i.reject(!1)}),i.promise},i}])}(window.punisher,window.config);